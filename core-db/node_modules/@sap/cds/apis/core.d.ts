import { ReflectedModel, ReflectedDefinition } from "@sap/cds-reflect/lib/reflect";
import { classes, types } from "@sap/cds-reflect/lib/types";
import CSN from "./csn";


export class cds {

	/** 
     * Returns a linked model to reflect on the given parsed models.
	 * https://coreds.github.io/API/#cdslinked 
	 */
	linked (...parsed: CSN.Model) : Model

	Association : typeof classes.Association
	Composition : typeof classes.Composition
	context : typeof classes.context
	service : typeof classes.service
	entity : typeof classes.entity
	struct : typeof classes.struct
	array : typeof classes.array
	builtin : { classes, types }

    reflect (parsed : CSN.Model) : typeof ReflectedModel
    reflect (parsed : CSN.Definition) : typeof ReflectedDefinition
}

interface Definitions { [name:string]: Definition } 
interface Extensions extends Array<Definition> {}
type Definition = CSN.Definition & CSN.entity & CSN.Association & {
    name : string
    elements? : { [name:string]: Definition }
    _target? : Definition
    _via? : Definition
    is2one? : true
    is2many? : true
    isUnresolved? : true
    isLinked? : true
 }
